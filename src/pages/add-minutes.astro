---
import users from "../data/users.json";

const userId = Astro.url.searchParams.get("id");
const user = users.find(u => String(u.id) === String(userId));
---

<div class="max-w-xl mx-auto bg-white p-6 shadow rounded-xl">

  <h2 class="text-2xl font-bold mb-4 text-center">زيادة الرصيد</h2>

  <form method="POST" action="/api/add-minutes" class="space-y-4">

    <!-- مهم جداً -->
    <input type="hidden" name="userId" value={user.id} />

    <label>نوع الزيادة:</label>
    <select name="type" class="w-full border p-2 rounded">
      <option value="minutes">🔢 دقائق</option>
      <option value="summaries">🧠 تلخيصات</option>
      <option value="articles">📝 مقالات</option>
      <option value="basic">📦 BASIC</option>
      <option value="pro">🚀 PRO</option>
      <option value="enterprise">🏆 ENTERPRISE</option>
    </select>

    <label>الكمية:</label>
    <input 
      type="number" 
      name="value" 
      placeholder="مثلاً 30" 
      class="w-full border p-2 rounded"
    />

    <button class="w-full bg-purple-600 text-white py-2 rounded">
      إضافة الرصيد +
    </button>

  </form>
</div>

---
import Layout from "../layouts/Layout.astro";
---

<Layout title="ุชูุฎูุต ุงููุตูุต" description="ุชูุฎูุต ุงุญุชุฑุงูู ูููุตูุต ุงูุทูููุฉ ุจุฏูุฉ ุนุงููุฉ">

<section class="max-w-3xl mx-auto px-4 py-12">

  <!-- TITLE -->
  <header class="text-center mb-8">
    <h1 class="text-3xl font-extrabold mb-3">
      ๐ ุชูุฎูุต ุงุญุชุฑุงูู ูููุตูุต
    </h1>
    <p class="text-gray-600 text-lg">
      ุฃูุตู ุฃู ูุต ุทููู ูุณูููู ุจุชูุฎูุตู ุชููุงุฆูุงู ุจุทุฑููุฉ ูุงุถุญุฉ ููููููุฉ.
    </p>
  </header>

  <!-- โ ADSENSE (TOP โ SAFE) -->
  <div class="mb-10 border rounded-lg py-4 text-center text-gray-400 text-sm">
    ๐ ุฅุนูุงู (Google AdSense)
  </div>

  <!-- TEXTAREA -->
  <textarea
    id="textInput"
    placeholder="ุฃูุตู ุงููุต ููุง..."
    class="w-full h-44 p-4 border rounded-xl text-lg focus:outline-none focus:ring-2 focus:ring-purple-500"
  ></textarea>

  <!-- BUTTON -->
  <button
    id="summarizeBtn"
    class="mt-5 w-full py-3 bg-purple-600 hover:bg-purple-700
           text-white rounded-xl text-lg font-semibold"
  >
    ุชูุฎูุต ุงููุต
  </button>

  <!-- LOADING -->
  <div id="loading" class="hidden mt-6 text-center text-lg">
    โณ ุฌุงุฑู ุชูุฎูุต ุงููุตโฆ ุงููุฑุฌู ุงูุงูุชุธุงุฑ
  </div>

  <!-- RESULTS -->
  <div id="results" class="hidden mt-10 space-y-6">

    <div>
      <h2 class="font-bold mb-2">๐ ุงูููุฎุต ุงูุณุฑูุน</h2>
      <div id="fast" class="box"></div>
    </div>

    <div>
      <h2 class="font-bold mb-2">๐ ุงูููุฎุต ุงูุชูุตููู</h2>
      <div id="detailed" class="box"></div>
    </div>

    <div>
      <h2 class="font-bold mb-2">๐ ุงูููุงุท ุงูุฃุณุงุณูุฉ</h2>
      <div id="points" class="box"></div>
    </div>

    <div>
      <h2 class="font-bold mb-2">๐ ุงููููุงุช ุงูููุชุงุญูุฉ</h2>
      <div id="keywords" class="box"></div>
    </div>

    <div>
      <h2 class="font-bold mb-2">๐ ุงูุฃุณุฆูุฉ ุงูููุชุฑุญุฉ</h2>
      <div id="questions" class="box"></div>
    </div>

    <button
      id="copyBtn"
      class="w-full py-3 bg-gray-900 text-white rounded-xl text-lg"
    >
      ๐ ูุณุฎ ุฌููุน ุงููุชุงุฆุฌ
    </button>

    <!-- โ ADSENSE (BOTTOM โ OPTIONAL) -->
    <div class="mt-10 border rounded-lg py-4 text-center text-gray-400 text-sm">
      ๐ ุฅุนูุงู (Google AdSense)
    </div>

  </div>

</section>

<style>
  .box {
    padding: 16px;
    background: #f5f3ff;
    border-radius: 10px;
    white-space: pre-wrap;
    line-height: 1.8;
    font-size: 16px;
    color: #111;
  }
</style>

<script>
  const loading = document.getElementById("loading");
  const resultsBox = document.getElementById("results");

  document.getElementById("summarizeBtn").onclick = async () => {
    const text = document.getElementById("textInput").value.trim();
    if (!text) {
      alert("ุงููุฑุฌู ุฅุฏุฎุงู ูุต!");
      return;
    }

    loading.classList.remove("hidden");
    resultsBox.classList.add("hidden");

    const res = await fetch("/api/summarize", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ text })
    });

    const data = await res.json();

    loading.classList.add("hidden");

    if (data.error) {
      alert(data.error);
      return;
    }

    document.getElementById("fast").innerText = data.fast;
    document.getElementById("detailed").innerText = data.detailed;
    document.getElementById("points").innerText = data.points;
    document.getElementById("keywords").innerText = data.keywords;
    document.getElementById("questions").innerText = data.questions;

    resultsBox.classList.remove("hidden");
  };

  document.getElementById("copyBtn").onclick = () => {
    const all =
      document.getElementById("results").innerText;
    navigator.clipboard.writeText(all);
    alert("โ ุชู ูุณุฎ ุงููุชุงุฆุฌ");
  };
</script>

</Layout>
